<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
		
		<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
		
		
		
		
		
		<link rel="stylesheet" href="jquery.mobile-1.0rc2.min.css" type="text/css" />		
		<link rel="stylesheet" href="style.css" type="text/css" />		
		
		<!-- iPad/iPhone specific css below, add after your main css >
		 <link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="ipad.css" type="text/css" />		
		 <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="iphone.css" type="text/css" />		
		 -->
		
		<!-- If your application is targeting iOS BEFORE 4.0 you MUST put json2.js from http://www.JSON.org/json2.js into your www directory and include it here -->
		<script type="text/javascript" charset="utf-8" src="js/jquery-1.7.min.js"></script>
		<script type="text/javascript" charset="utf-8" src="js/jquery.mobile-1.0rc2.min.js"></script>
		<script type="text/javascript" charset="utf-8" src="js/phonegap-1.3.0.js"></script>
		
		
		<script type="text/javascript" charset="utf-8">
			
			
			// If you want to prevent dragging, uncomment this section
			/*
			 function preventBehavior(e) 
			 { 
			 e.preventDefault(); 
			 };
			 document.addEventListener("touchmove", preventBehavior, false);
			 */
			
			/* If you are supporting your own protocol, the var invokeString will contain any arguments to the app launch.
			 see http://iphonedevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html
			 for more details -jm */
			/*
			 function handleOpenURL(url)
			 {
			 // TODO: do something with the url passed in.
			 }
			 */
			
			function onBodyLoad(){		
				document.addEventListener("deviceready",onDeviceReady,false);

                window.translationToggleOn = 0;
		
				loadXML();
				
				
				
			}
			
			/* When this function is called, PhoneGap has been initialized and is ready to roll */
			/* If you are supporting your own protocol, the var invokeString will contain any arguments to the app launch.
			 see http://iphonedevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html
			 for more details -jm */
			function onDeviceReady(){
				// do your thing!
				//navigator.notification.alert("PhoneGap is working")
				
			}	
			
			
			function loadXML(){
				
				if (window.XMLHttpRequest)
				{
					xhttp=new XMLHttpRequest();
				}
				
				
				xhttp.open("GET","content/aliyah.xml",false);
				xhttp.send("");
				xmlDoc=xhttp.responseXML; 
				
				var parshahInfo = ''
				
				var x=xmlDoc.getElementsByTagName("parsha"); //put all verses in an array
				
				
				var origParshahBookName = "";
				
				
				for (i=0;i<x.length;i++) //loop through every parsha
				{
					var parshahIndex = x[i].attributes.getNamedItem('num').value; //get current parsha number
					var parshahHebName = x[i].attributes.getNamedItem('hebrew').value; //get current parsha number
					var parshahEngName = x[i].attributes.getNamedItem('id').value; //get current parsha eng name				
					var parshahBookName = (x[i].attributes.getNamedItem('verse').value.split(" ")[0]); //get current parsha haftarah book and push into array				
					
					if (origParshahBookName != parshahBookName)  /* creates headers for each book of the torah */
					{
						parshahInfo = parshahInfo + "<li class='ui-li ui-li-static ui-body-e'>"+parshahBookName+"</li>";
						origParshahBookName = parshahBookName;
					}
					parshahInfo = parshahInfo + "<li class='ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-btn-up-c' data-theme='c' style='text-align:right' onclick='loadKriyahSelect(\""+parshahIndex+"\",\""+parshahEngName+"\",\""+parshahHebName+"\",\""+parshahBookName+"\")'><div class='ui-btn-inner ui-li' aria-hidden='true'><div class='ui-btn-text'><a class='ui-link-inherit' href=''>" + parshahEngName + " - " +parshahHebName + "</a></div><span class='ui-icon ui-icon-arrow-r ui-icon-shadow'></span></div></li>"; //lists each parshah with a link to load needed variables and go to aliyah selection page 
					
					
					document.getElementById('parshahList').innerHTML = parshahInfo;	//place the stylized content from above into placeholder
					
				}
				
			}
			
			function changeKriyahToggle(){
				navigator.notification.alert("You may need to reselect the parshah to see the updated text.");
			}
			
			
			function loadKriyahSelect(num,engname,hebname,bookName) {
				document.getElementById('kriyahSelectHeader').innerHTML = engname + " - " + hebname ;
				window.location.href='#kriyahSelect';
				var index = num-1;
				document.getElementById('aliyah-1-link').onclick=function() { loadAliyah(engname,index,0,bookName); }
				document.getElementById('aliyah-2-link').onclick=function() { loadAliyah(engname,index,1,bookName); }
				document.getElementById('aliyah-3-link').onclick=function() { loadAliyah(engname,index,2,bookName); }
				document.getElementById('aliyah-4-link').onclick=function() { loadAliyah(engname,index,3,bookName); }
				document.getElementById('aliyah-5-link').onclick=function() { loadAliyah(engname,index,4,bookName); }
				document.getElementById('aliyah-6-link').onclick=function() { loadAliyah(engname,index,5,bookName); }
				document.getElementById('aliyah-7-link').onclick=function() { loadAliyah(engname,index,6,bookName); }
				document.getElementById('aliyah-M-link').onclick=function() { loadAliyah(engname,index,7,bookName); }
				document.getElementById('aliyah-haftrah-link').onclick=function() { loadAliyah(engname,index,'H',bookName); }
				//					document.getElementById('aliyah-commentary-link').
				
				
				//	
				
				
				
			}			
			
			function loadAliyah(engname,num,display,bookName) {
					changeTextSize();
					changeTaameiHighlight();
                    
			
			if (display == 7 || display == 'H') {
			var fileName = display;
			}
			else { var fileName = display+1; }
					
			jQuery.get('content/torah/labels/'+engname+'-'+fileName+'.txt', function(data) {window.wordStartTime = data.split(',');});
			var audioFile = 'content/torah/audio/'+engname+'-'+fileName+'.mp3'
				
				if (window.XMLHttpRequest)
				{
					xhttp=new XMLHttpRequest();
				}
				
				
				xhttp.open("GET","content/aliyah.xml",false);
				xhttp.send("");
				xmlDoc=xhttp.responseXML; 
				var z=xmlDoc.getElementsByTagName("parsha")[num];
				window.splitHaftarah = 0;
				window.numVerses = 55;
				
			if (display != 'H') {
			//check which reading option the user selected, and return the corresponding starting and ending verse of the aliyah as a string	
				var el =  document.getElementById('kriyahToggle'); 
				if (kriyahToggle.value == "full") {
					var aliyahBegin=z.getElementsByTagName("fullkriyah")[0].getElementsByTagName("aliyah")[display].attributes.getNamedItem('begin').value;
					var aliyahEnd=z.getElementsByTagName("fullkriyah")[0].getElementsByTagName("aliyah")[display].attributes.getNamedItem('end').value;
				}
				
				if (kriyahToggle.value == "tri1") {
					var aliyahBegin=z.getElementsByTagName("triennial")[0].getElementsByTagName("year")[0].getElementsByTagName("aliyah")[display].attributes.getNamedItem('begin').value;
					var aliyahEnd=z.getElementsByTagName("triennial")[0].getElementsByTagName("year")[0].getElementsByTagName("aliyah")[display].attributes.getNamedItem('end').value;
				}
				
				if (kriyahToggle.value == "tri2") {
					var aliyahBegin=z.getElementsByTagName("triennial")[0].getElementsByTagName("year")[1].getElementsByTagName("aliyah")[display].attributes.getNamedItem('begin').value;
					var aliyahEnd=z.getElementsByTagName("triennial")[0].getElementsByTagName("year")[1].getElementsByTagName("aliyah")[display].attributes.getNamedItem('end').value;
				}
				
				if (kriyahToggle.value == "tri3") {
					var aliyahBegin=z.getElementsByTagName("triennial")[0].getElementsByTagName("year")[2].getElementsByTagName("aliyah")[display].attributes.getNamedItem('begin').value;
					var aliyahEnd=z.getElementsByTagName("triennial")[0].getElementsByTagName("year")[2].getElementsByTagName("aliyah")[display].attributes.getNamedItem('end').value;
				}
				
				
				window.numVerses=z.getElementsByTagName("fullkriyah")[0].getElementsByTagName("aliyah")[display].attributes.getNamedItem('numverses').value; //get total number of verses in the full aliyah
				}
			if (display == 'H') {
				
				var haftarah = z.attributes.getNamedItem('haftara').value;
				haftarah = haftarah.split(";");
				bookName = haftarah[0].split(" ")[0];

				var aliyahBegin=haftarah[0].split(" ")[1];
				var aliyahEnd=haftarah[0].split(" ")[3];
				
					if (typeof(haftarah[1]) != "undefined") {
					window.splitHaftarah = 1;
					var aliyahEndArray2 = haftarah[1].split(" ")[1];
					window.aliyahEndChapter2 = aliyahEndArray2.split(":")[0];
					window.aliyahEndVerse2 = aliyahEndArray2.split(":")[1];
					var aliyahBeginArray2 = haftarah[1].split(" ")[3];
					window.aliyahBeginChapter2 = aliyahBeginArray2.split(":")[0];
					window.aliyahBeginVerse2 = aliyahBeginArray2.split(":")[1];     
					}
				
				
					
						}
												
			//split string into individual numbers to more easily manipulate
				var aliyahEndArray = aliyahEnd.split(":");
				window.aliyahEndChapter = aliyahEndArray[0];
				window.aliyahEndVerse = aliyahEndArray[1];
				var aliyahBeginArray = aliyahBegin.split(":");
				window.aliyahBeginChapter = aliyahBeginArray[0];
				window.aliyahBeginVerse = aliyahBeginArray[1];      
				
			//convert real chapter and verse numbers to index numbers making it easier to itterate and reiterate through words and verses	
				var begAliyahChapterIndex = window.aliyahBeginChapter -1; 
				var begAliyahVerseIndex = window.aliyahBeginVerse -1;
				var endAliyahChapterIndex = window.aliyahEndChapter -1;
				var endAliyahVerseIndex = window.aliyahEndVerse -1;
				
				
				
				
				if (window.XMLHttpRequest)
				{
					xhttp=new XMLHttpRequest();
				}
				
				xhttp.open("GET","content/torah/xml/"+ bookName +".xml",false);
				xhttp.send("");
				xmlDoc=xhttp.responseXML; 
				
				var changeChapter = 0;
				var lastVerseinCurChapter=xmlDoc.getElementsByTagName("c")[begAliyahChapterIndex].getElementsByTagName("v").length; //				
				var curVerseIndex=xmlDoc.getElementsByTagName("c")[begAliyahChapterIndex].getElementsByTagName("v")[begAliyahVerseIndex].attributes.getNamedItem('n').value; //				
				var versesLeftinCurChapter = lastVerseinCurChapter- curVerse;
				var curVerse=xmlDoc.getElementsByTagName("c")[begAliyahChapterIndex].getElementsByTagName("v")[begAliyahVerseIndex];
				var hebtexthtml='<ul class="ui-listview" data-role="listview" data-theme="c">'
				var x=curVerse;
				var nextVerseIndex = begAliyahVerseIndex;
				var nextChapterIndex = begAliyahChapterIndex
				for (i=0;i<window.numVerses;i++)
				{
					var curVerseID = i + window.startingVersePos;
					var linecount=x.getElementsByTagName("w").length;
					
					
					hebtexthtml  = hebtexthtml  + '<li class="ui-li ui-li-static ui-body-c" style="text-align:right"><span class="v" id="verse'+ curVerseID +'">'+ (nextChapterIndex+1) + ":" + (nextVerseIndex+1) +'</span> ';  //This line includes the line number
					
					
					
					for (q=0;q<linecount;q++) //loop through and get every word in verse
					{
						var words=x.getElementsByTagName("w")[q].childNodes[0].nodeValue;  //get each word in the verse
						
						words = words.replace(/[/]/g,""); //replaces slashes with blank space
						
						hebtexthtml = hebtexthtml + '<span class="w">'+ words + ' </span>';
						
						
						
					}
					
                    hebtexthtml = hebtexthtml + '</li>';
                    
                    
                    
                    
                    
                    
                    
                    if (window.translationToggleOn == 1) {

                    if (window.XMLHttpRequest)
                    {
                        xhttp=new XMLHttpRequest();
                    }
                    
                    xhttp.open("GET","content/torah/translation/"+ bookName +".xml",false);
                    xhttp.send("");
                    quack=xhttp.responseXML; 
                    
                    
                    hebtexthtml = hebtexthtml + '<li class="ui-li ui-li-static ui-body-c" style="direction: ltr;">' + quack.getElementsByTagName("c")[nextChapterIndex].getElementsByTagName("v")[nextVerseIndex].childNodes[0].nodeValue + '</li>';
                    
                       
                 
                    }
                    
                    
                    
                    
                    
                    
                    
                    
					nextVerseIndex = nextVerseIndex + 1;
					
					
					
					if (nextVerseIndex < lastVerseinCurChapter){
						//keep calm and carry on
					}
					else {
						
						nextVerseIndex = 0;
						nextChapterIndex = nextChapterIndex + 1;
					}
					
					if (changeChapter == 1) {
					
							nextVerseIndex = window.aliyahBeginVerse2 -2;
							nextChapterIndex = window.aliyahBeginChapter2 -1;
							endAliyahChapterIndex = window.aliyahEndChapter2 -1;
							endAliyahVerseIndex = window.aliyahEndVerse2;
							window.splitHaftarah = 0;
							changeChapter = 0;
					
					}
					
					if ( (nextChapterIndex == endAliyahChapterIndex) && (nextVerseIndex == endAliyahVerseIndex) ) {
					
						
							if (window.splitHaftarah == 0) {
									i = (window.numVerses-2) ;
									}
							else if (window.splitHaftarah == 1) {
							
								changeChapter = 1;

										}
					}
					
					x = xmlDoc.getElementsByTagName("c")[nextChapterIndex].getElementsByTagName("v")[nextVerseIndex];
					lastVerseinCurChapter=xmlDoc.getElementsByTagName("c")[nextChapterIndex].getElementsByTagName("v").length; //				
					
//					hebtexthtml = hebtexthtml + '</li>';
					
				}
				hebtexthtml = hebtexthtml + '</ul>';
				
				
				//this adds span to taamim
				var newString;
				for(j=0; j<hebtexthtml.length; j++) {
					if((hebtexthtml.charCodeAt(j)>1424
						&& hebtexthtml.charCodeAt(j)<1455) || (hebtexthtml.charCodeAt(j)==1469))
					{ newString = newString + "<span class='taamei'>" + hebtexthtml.charAt(j) + "</span>"; }
					
					else { newString = newString + hebtexthtml.charAt(j); }
				}
				hebtexthtml = newString;
				
				hebtexthtml = hebtexthtml.replace(/־\<\/span\> /g,"־</span>");
				
				
				
				document.getElementById('hebtext').innerHTML = hebtexthtml;	
				
				
				//These two short functions assign id labels to each of the words and verses -- these are used when calling audio files and hilight functions
				$(".w").attr("id", function (arr) {
							 return "word" + arr;
							 })
				/*
				
				$(".v").attr("id", function (arr) {
							 return "verse" + arr;
							 })
				
				*/
				
				
				//load new audio file
				function loadAudioFile(src){
					
					my_media = new Media(src, audioSuccess);
					
				}
				
				//declare necesary variables for audio
				{
					var mediaTimer = null;
					var my_media = null;
					//my_media = new Media(src);
					loadAudioFile(audioFile);
				}
				
				function audioSuccess() {
					$(".w").css("background","");
					clearInterval(mediaTimer);
				}
				
				
				
				
				//play & hilight verse function
				{
					
					$(".v").tap(function() {				/* When verse is clicked do the following */

						  		  $(".w").css("background","");			/* Clear all highlights */
								  my_media.pause();						/* Pause audio that might be playing if user was impatient */
								  clearInterval(mediaTimer);			/* Clear MediaTimer */
								  
								  
								  
								  //Figure out and define when (in seconds) the verse starts and ends, and when the next word to be played starts and ends
								  //important for starting and stopping audio and for highlighting
								//  var verseIndex = parseInt($(this).attr("id").replace('verse', ''));
								  var wordsInVerse = $(this).siblings().length;
								  var firstWordInVerseIndex = parseInt($(this).next().attr("id").replace('word', ''));
								  var lastWordInVerseIndex = firstWordInVerseIndex + wordsInVerse;
								  var timeEnd = window.wordStartTime[lastWordInVerseIndex];
								  timeEnd = parseFloat(timeEnd);
								  var timeNextWord = window.wordStartTime[firstWordInVerseIndex+1];
								  var nextVerseWordIndex = firstWordInVerseIndex + 1;
								  var timeStart = window.wordStartTime[firstWordInVerseIndex];
								  
								  
								  
								  
								  timeStart = parseFloat(timeStart);
								  timeStart = timeStart * 1000;
								  timeStart = parseInt(timeStart);
								  
								  $(this).next().css("background","#FFCC11"); //highlights word in a mustardy color
								  //play audio at starttime of verse
								  my_media.play();
								  my_media.seekTo(timeStart);
								  
								  mediaTimer = setInterval(function() {  
														   // get my_media position
														   my_media.getCurrentPosition(
																					   // success callback
																					   function(position) {
																					   
																						if (position > -1) {
																						document.getElementById('audio_position').innerHTML = position;
																						//updates timer
																						}
																						
																					   
																					   if (position > timeNextWord) {
																					   $(".w").css("background","");
																					   $("#word"+nextVerseWordIndex).css("background","#FFCC11");
																					   timeNextWord = window.wordStartTime[nextVerseWordIndex+1];
																					   nextVerseWordIndex = nextVerseWordIndex +1;
																					   //sees if current word is finished being said, then hilights the next one
																					   }
																					   
																					   
																					   if (position > timeEnd) {
																					   my_media.stop();
																					   $(".w").css("background","");
																					   clearInterval(mediaTimer);
																					   //checks to see if audio has reached the predetermined end time defined above. If so, it stops the audio, and removes all highlights.
																					   }
																					   
																					   
																					   
																					   },
																					   // error callback
																					   function(e) {
																					   console.log("Error getting pos=" + e);
																					   setAudioPosition("Error: " + e);
																					   my_media.stop();
																					   clearInterval(mediaTimer);
																					   }
																					   );
														   }, 50);
								  
								  
								  
								  })
					
				}
		
						
						
						$("h1").tap(function() { 
						  my_media.pause();						/* Pause audio that might be playing if user was impatient */
						  clearInterval(mediaTimer);			/* Clear MediaTimer */
						  $(".w").css("background","");

													});
						
				
				//play & hilight word function
				 		
				
				
					$(".w").tap(function() { 
					
//					  alert( (window.wordStartTime.length) + ' audio tags in ' + engname +'-'+(display+1) +'.txt' +'\n\nThis is wordid ' +$(this).attr("id").replace('word', '')  );

					
					
								  $(".w").css("background","");
								  
								  my_media.pause();
								  clearInterval(mediaTimer);			
								  $(this).css("background","#FFCC11");
								  
								  
								  
								  var wordIndex = parseInt($(this).attr("id").replace('word', ''));




								  var nextWordIndex = wordIndex + 1;
								  
								  var timeEnd = window.wordStartTime[nextWordIndex];
								  timeEnd = parseFloat(timeEnd);
								  
								  
								 // alert('You clicked on word #' + wordIndex + ' it begins at ' + window.wordStartTime[wordIndex] + ' seconds and ends at: ' +  window.wordStartTime[nextWordIndex] +  ' seconds'  );
								  var timeStart = window.wordStartTime[wordIndex];
								  timeStart = parseFloat(timeStart);
								  timeStart = timeStart * 1000;
								  timeStart = parseInt(timeStart);
								  
								  
								  
								  my_media.play();
								  my_media.seekTo(timeStart);
								  
								  
								  
								  mediaTimer = setInterval(function() {
														   // get my_media position
														   my_media.getCurrentPosition(
																					   // success callback
																					   function(position) {
																					   
																						if (position > -1) {
																						document.getElementById('audio_position').innerHTML = position;
																						//updates timer
																						}
																						
																					   
																					   
																					   
																					   if (position > timeEnd) {
																					   my_media.stop();
																					   $(".w").css("background","");
																					   clearInterval(mediaTimer);
																					   }
																					   
																					   },
																					   // error callback
																					   function(e) {
																					   console.log("Error getting pos=" + e);
																					   setAudioPosition("Error: " + e);
																					   my_media.stop();
																					   clearInterval(mediaTimer);
																					   }
																					   );
														   }, 50);
								  
								  
								  
								  
								  
								  });
				
				


				
			
			
//various text manipulation functions
	$("#reader").swipeleft( function () { $(".w").css("font-family","Stam Ashkenaz CLM"); 	});
	$("#reader").swiperight( function () {	  $(".w").css("font-family","djklsfjkhsdf");  });		
			
			
			
//debug & expereimental functions
				$(".w").taphold( function () { 
			     var wordIndex = parseInt($(this).attr("id").replace('word', ''));
				  var nextWordIndex = wordIndex + 1;


			//	var verseIndex = $(this).siblings(':first').html();

				alert('word id:'+wordIndex+'\nstart: ' + window.wordStartTime[wordIndex] + '\nend: '+window.wordStartTime[nextWordIndex]);
				
				  });

			
			
			
			
}			

//change text size			
     function changeTextSize() {
              var el = document.getElementById('textSizeSlider');
			$(".w").css("font-size", el.value+"pt");
			
            }

function changeTaameiHighlight() {
			var el =  document.getElementById('taameiHighlightToggle');
				if (taameiHighlightToggle.value == "no") {
				$(".taamei").css("color", "black");
				}
				
				if (taameiHighlightToggle.value == "yes") {
				$(".taamei").css("color", "red");				
				}
}

            
            
            function changeTranslationToggle() {
                var el =  document.getElementById('translationToggle');
				if (translationToggle.value == "no") {
                    window.translationToggleOn = 0 ;
				}
				
				if (translationToggle.value == "yes") {
                    window.translationToggleOn = 1 ;
				}
                navigator.notification.alert("You may need to reselect the parshah to see the updated text.");

            }



			
			</script>
	</head>
	<body onload="onBodyLoad()">
		
		
		
		<!-- Start of first page -->
		<div data-role="page" id="HomePage">
			
			<div data-role="header" data-theme="c">
				<h1><img src="images/logo.png" alt="PocketTorah" height="25"></h1>
				<a href="#settings" data-icon="gear" class="ui-btn-right" data-iconpos="notext" data-transition="flip">Options</a>
			</div><!-- /header -->
			
			<div data-role="content">	
				<ul data-role="listview" data-inset="true" data-theme="c">
					<li role="heading" data-role="list-divider">Choose a Parshah</li>
					<div id="parshahList" class="heb">
					</div>
					<li></li>
					
				</ul>
				
			</div><!-- /content -->
			
		</div><!-- /page -->
		
		
		
		
		
		<!-- Start of kriyah select page -->
		<div data-role="page" id="kriyahSelect" data-add-back-btn="true" >
			
			<div data-role="header" data-theme="c">
				<h1><img src="images/logo.png" alt="PocketTorah" height="25"></h1>
				<a href="#settings" data-icon="gear" class="ui-btn-right" data-iconpos="notext" data-transition="flip">Options</a>
			</div><!-- /header -->
			
			<div data-role="content">	
				<ul data-role="listview" data-inset="true" data-theme="c">
					<li role="heading" data-role="list-divider" id="kriyahSelectHeader">Readings for ParshahName</li>
					
					<li id="aliyah-1-link"><a href='#reader'>Aliyah 1</a></li>
					<li id="aliyah-2-link"><a href='#reader'>Aliyah 2</a></li>
					<li id="aliyah-3-link"><a href='#reader'>Aliyah 3</a></li>
					<li id="aliyah-4-link"><a href='#reader'>Aliyah 4</a></li>
					<li id="aliyah-5-link"><a href='#reader'>Aliyah 5</a></li>
					<li id="aliyah-6-link"><a href='#reader'>Aliyah 6</a></li>
					<li id="aliyah-7-link"><a href='#reader'>Aliyah 7</a></li>
					<li id="aliyah-M-link"><a href='#reader'>Maftir Aliyah</a></li>
					<li id="aliyah-haftrah-link"><a href='#reader'>Haftarah</a></li>
					<li id="aliyah-commentary-link"><a href=''>Commentary</a></li>
					
					
				</ul>
				
				
			</div><!-- /content -->
			
		</div><!-- /page -->
		
		
		
		<!-- Start of trope page -->
		<div data-role="page" id="reader" data-add-back-btn="true" >
			
			<div data-role="header" data-theme="c" data-position="fixed">
				<h1><img src="images/logo.png" alt="PocketTorah" height="25"><div id="audio_position"></div></h1>
				<a href="#settings" data-icon="gear" class="ui-btn-right" data-iconpos="notext" data-transition="flip">Options</a>
			</div><!-- /header -->
			
			<div data-role="content">	
				<div id="hebtext" class="heb">
					
					
				</div>
				
				
				
				
			</div>
			
			
			
		</div><!-- /page -->
		
		
		
		
		<!-- Start of settings page -->
		<div data-role="page" id="settings" data-add-back-btn="true">
			
			<div data-role="header" data-theme="c">
				<h1><img src="images/logo.png" alt="PocketTorah" height="25"></h1>
			</div><!-- /header -->
			
			<div data-role="content">	
				<label for="textSizeSlider">Font Size:</label>
				<input type="range" name="slider" id="textSizeSlider" value="24" min="10" max="50" onchange="changeTextSize()" />
				
				<p>Sample:<br /><div class="w">אֶתְנַחְתָּ<span class="taamei">֑</span>א</div></p>
				
				
				<div data-role="fieldcontain">
					<label for="taameiHighlightToggle">Highlight Trope Symbols?</label>
					<select name="slider" id="taameiHighlightToggle" data-role="slider" onchange="changeTaameiHighlight()" >
						<option value="no">No</option>
						<option value="yes" selected="selected">Yes</option>
					</select> 
				</div>
				
				
				<div data-role="fieldcontain">
					<label for="translationToggle">Show English Translation?</label>
					<select name="slider" id="translationToggle" data-role="slider" onchange="changeTranslationToggle()" >
						<option value="no" selected="selected">No</option>
						<option value="yes">Yes</option>
					</select> 
				</div>
				
				
                
                
                
				
				<div data-role="fieldcontain">
					<label for="kriyahToggle" class="select">Kriyah Selection:</label>
					<select name="select-choice-1" id="kriyahToggle" onchange="changeKriyahToggle();">
						<option value="full" selected="selected">Full Kriyah</option>
						<option value="tri1">Triennial Year 1</option>
						<option value="tri2">Triennial Year 2</option>
						<option value="tri3">Triennial Year 3</option>
					</select>
				</div>
				
				
				
				
				
				<a href="" data-rel="back" data-role="button">Close</a> 
				
				
			</div>
			
			
			
			
		</div>
		
		
		</div><!-- /page -->
		
		
		
	</body>
</html>
